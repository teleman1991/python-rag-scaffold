{
    "content": "IyBEb2N1bWVudCBwcm9jZXNzb3IgY2xhc3MgZm9yIGhhbmRsaW5nIGRvY3VtZW50IGFuYWx5c2lzCgpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKZnJvbSBQeVBERjIgaW1wb3J0IFBkZlJlYWRlcgpmcm9tIHRyYW5zZm9ybWVycyBpbXBvcnQgcGlwZWxpbmUKCmNsYXNzIERvY3VtZW50UHJvY2Vzc29yOgogICAgIiIiSGFuZGxlcyBkb2N1bWVudCBwcm9jZXNzaW5nIGFuZCBhbmFseXNpcy4iIiIKICAgIAogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgICIiIkluaXRpYWxpemUgdGhlIGRvY3VtZW50IHByb2Nlc3NvciB3aXRoIG5lY2Vzc2FyeSBNTCBwaXBlbGluZXMuIiIiCiAgICAgICAgc2VsZi5zdW1tYXJpemVyID0gcGlwZWxpbmUoJ3N1bW1hcml6YXRpb24nKQogICAgICAgIAogICAgZGVmIF9leHRyYWN0X3RleHRfZnJvbV9wZGYoc2VsZiwgZmlsZV9wYXRoOiBQYXRoKSAtPiBzdHI6CiAgICAgICAgIiIiRXh0cmFjdCB0ZXh0IGNvbnRlbnQgZnJvbSBhIFBERiBmaWxlLiIiIgogICAgICAgIHJlYWRlciA9IFBkZlJlYWRlcihmaWxlX3BhdGgpCiAgICAgICAgdGV4dCA9ICIiCiAgICAgICAgZm9yIHBhZ2UgaW4gcmVhZGVyLnBhZ2VzOgogICAgICAgICAgICB0ZXh0ICs9IHBhZ2UuZXh0cmFjdF90ZXh0KCkKICAgICAgICByZXR1cm4gdGV4dAogICAgCiAgICBkZWYgcHJvY2Vzc19wZGYoc2VsZiwgZmlsZV9wYXRoOiBQYXRoKSAtPiBkaWN0OgogICAgICAgICIiIlByb2Nlc3MgYSBQREYgZG9jdW1lbnQgYW5kIGV4dHJhY3Qga2V5IGluZm9ybWF0aW9uLiIiIgogICAgICAgICMgRXh0cmFjdCB0ZXh0CiAgICAgICAgdGV4dCA9IHNlbGYuX2V4dHJhY3RfdGV4dF9mcm9tX3BkZihmaWxlX3BhdGgpCiAgICAgICAgCiAgICAgICAgIyBHZW5lcmF0ZSBzdW1tYXJ5IChjaHVuayB0ZXh0IGlmIHRvbyBsb25nKQogICAgICAgIG1heF9jaHVua19zaXplID0gMTAyNAogICAgICAgIGNodW5rcyA9IFt0ZXh0W2k6aSttYXhfY2h1bmtfc2l6ZV0gZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKHRleHQpLCBtYXhfY2h1bmtfc2l6ZSldCiAgICAgICAgCiAgICAgICAgc3VtbWFyaWVzID0gW10KICAgICAgICBmb3IgY2h1bmsgaW4gY2h1bmtzOgogICAgICAgICAgICBpZiBsZW4oY2h1bmsuc3RyaXAoKSkgPiAxMDA6ICAjIE9ubHkgc3VtbWFyaXplIHN1YnN0YW50aWFsIGNodW5rcwogICAgICAgICAgICAgICAgc3VtbWFyeSA9IHNlbGYuc3VtbWFyaXplcihjaHVuaywgbWF4X2xlbmd0aD0xMzAsIG1pbl9sZW5ndGg9MzApCiAgICAgICAgICAgICAgICBzdW1tYXJpZXMuYXBwZW5kKHN1bW1hcnlbMF1bJ3N1bW1hcnlfdGV4dCddKQogICAgICAgIAogICAgICAgICMgQmFzaWMgbWV0YWRhdGEKICAgICAgICBtZXRhZGF0YSA9IHsKICAgICAgICAgICAgJ3RvdGFsX2xlbmd0aCc6IGxlbih0ZXh0KSwKICAgICAgICAgICAgJ251bV9wYWdlcyc6IGxlbihyZWFkZXIucGFnZXMpLAogICAgICAgICAgICAnZmlsZV90eXBlJzogJ1BERicKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgJ3N1bW1hcnknOiAnICcuam9pbihzdW1tYXJpZXMpLAogICAgICAgICAgICAnbWV0YWRhdGEnOiBtZXRhZGF0YSwKICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlCiAgICAgICAgfQ==",
    "encoding": "base64"
}